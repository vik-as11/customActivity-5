<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Custom Marketing Activity</title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://custom-activity-5.vercel.app/config.js"></script>
    <script type="text/javascript" src="js/require.js"></script>
    <script type="text/javascript">
        (function() {
            var config = {
                baseUrl: 'js'
            };
            var dependencies = [
                'customActivity'
            ];
            require(config, dependencies);
        })();
    </script>
    <link rel="stylesheet" type="text/css" href="css/styles.css">
</head>
<body>
    <div id="step1" class="step">
        <div class="slds-grid">
            <!-- Existing fields -->
            <div class="slds-col slds-size_1-of-2">
                <label for="activity-name">Activity Name</label>
                <input type="text" id="activity-name" placeholder="Enter activity name">
            </div>
            <div class="slds-col slds-size_1-of-2">
                <label for="activity-description">Description</label>
                <textarea id="activity-description" placeholder="Enter activity description"></textarea>
            </div>
        </div>

        <!-- New fields for mobile number, email, and message content -->
        <div class="slds-grid">
            <div class="slds-col slds-size_1-of-2">
                <label for="mobile-number">Mobile Number</label>
                <input type="tel" id="mobile-number" placeholder="Enter mobile number" required>
            </div>
            <div class="slds-col slds-size_1-of-2">
                <label for="email-address">Email Address</label>
                <input type="email" id="email-address" placeholder="Enter email address" required>
            </div>
        </div>

        <div class="slds-grid">
            <div class="slds-col slds-size_1-of-1">
                <label for="message-content">Message Content</label>
                <textarea id="message-content" placeholder="Enter your message" rows="4" required></textarea>
            </div>
        </div>

        <!-- Confirm Button -->
        <div class="slds-grid">
            <div class="slds-col slds-size_1-of-1">
                <button type="button" id="confirm-button">Confirm</button>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        $(document).ready(function() {
            $('#confirm-button').click(function() {
                const payload = {
                    activityName: $('#activity-name').val(),
                    activityDescription: $('#activity-description').val(),
                    mobileNumber: $('#mobile-number').val(),
                    emailAddress: $('#email-address').val(),
                    messageContent: $('#message-content').val()
                };

                // Post data back to the parent window
                window.parent.postMessage(JSON.stringify({
                    action: 'setActivityData',
                    activityData: payload
                }), '*');
            });
        });
    </script>
</body>
</html>
